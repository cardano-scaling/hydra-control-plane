---
apiVersion: eksctl.io/v1alpha5
kind: ClusterConfig

metadata:
  name: hydra-doom-dev-cluster
  # region: us-east-1
  region: eu-central-1
  # region: us-west-2
  tags: 
    sundae-labs:cost-allocation:Service: hydra-doom

iam:
  withOIDC: true

addons:
- name: aws-ebs-csi-driver
- name: eks-pod-identity-agent

managedNodeGroups:
  - name: be-adm-x86-az1
    tags: 
      sundae-labs:cost-allocation:Service: hydra-doom
    labels:
      hydra.doom/availability-sla: best-effort
      hydra.doom/compute-profile: admin
      hydra.doom/compute-arch: x86
      hydra.doom/availability-zone: az1
    instanceTypes: [ t3a.medium, t3.medium ]
    minSize: 0
    maxSize: 3
    desiredCapacity: 0
    spot: true
    availabilityZones:
      # - us-east-1b
      - eu-central-1b
      # - us-west-2b
  - name: co-adm-x86-az1
    tags: 
      sundae-labs:cost-allocation:Service: hydra-doom
    labels:
      hydra.doom/availability-sla: consistent
      hydra.doom/compute-profile: admin
      hydra.doom/compute-arch: x86
      hydra.doom/availability-zone: az1
    instanceTypes: [ t3a.medium, t3.medium ]
    minSize: 0
    maxSize: 3
    desiredCapacity: 3
    spot: false
    availabilityZones:
      # - us-east-1b
      - eu-central-1b
      # - us-west-2b

fargateProfiles:
  - name: fp-default
    tags: 
      sundae-labs:cost-allocation:Service: hydra-doom
    selectors:
      - namespace: hydra-doom
        labels:
          run-on: fargate
